{"version":3,"sources":["webpack:///./src/components/home/Users.vue","webpack:///src/components/home/Users.vue","webpack:///./src/components/home/Users.vue?e8ed","webpack:///./src/components/home/Users.vue?58c6","webpack:///./src/components/home/Users.vue?b876"],"names":["render","_vm","this","_c","_self","attrs","path","_v","on","getUserList","model","value","queryInfo","query","callback","$$v","$set","expression","slot","addUserDialog","staticStyle","userList","scopedSlots","_u","key","fn","scope","$event","stateChange","row","mg_state","editDialog","deleteUsersById","allotRoles","total","editDialogVisible","resetEditDialog","ref","editRuleForm","editRuleFormRules","username","email","mobile","staticClass","editUser","addDialogVisible","resetAddUserDialog","addRuleForm","addRuleFormRules","password","addUser","allotRolesDialogVisible","_s","userInfo","role_name","selectedRoles","_l","rolesList","item","i","id","roleName","allotRolesConfirm","staticRenderFns","name","components","Pagination","data","pagesize","pagenum","propsURL","url","method","params","role_id","required","message","trigger","validate","min","max","rowId","created","methods","request","res","console","handleSizeChange","newSize","handleCurrentChange","newNum","confirmButtonText","cancelButtonText","type","catch","result","valid","rid","component"],"mappings":"wIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,GAAG,CAACA,EAAG,gBAAgB,CAACE,MAAM,CAAC,kBAAkB,wBAAwB,CAACF,EAAG,qBAAqB,CAACE,MAAM,CAAC,GAAK,CAAEC,KAAM,WAAY,CAACL,EAAIM,GAAG,QAAQJ,EAAG,qBAAqB,CAACF,EAAIM,GAAG,UAAUJ,EAAG,qBAAqB,CAACF,EAAIM,GAAG,WAAW,GAAGJ,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,UAAY,GAAG,YAAc,SAASG,GAAG,CAAC,MAAQP,EAAIQ,aAAaC,MAAM,CAACC,MAAOV,EAAIW,UAAUC,MAAOC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIW,UAAW,QAASG,IAAME,WAAW,oBAAoB,CAACd,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,kBAAkBG,GAAG,CAAC,MAAQP,EAAIQ,aAAaS,KAAK,YAAY,IAAI,GAAGf,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQP,EAAIkB,gBAAgB,CAAClB,EAAIM,GAAG,WAAW,IAAI,GAAGJ,EAAG,WAAW,CAACiB,YAAY,CAAC,MAAQ,QAAQf,MAAM,CAAC,KAAOJ,EAAIoB,SAAS,OAAS,GAAG,OAAS,KAAK,CAAClB,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAWF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,QAAQF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,QAAQ,MAAQ,QAAQF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,SAAS,MAAQ,QAAQF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,YAAY,MAAQ,QAAQF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,MAAMiB,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACvB,EAAG,YAAY,CAACE,MAAM,CAAC,eAAe,UAAU,iBAAiB,WAAWG,GAAG,CAAC,OAAS,SAASmB,GAAQ,OAAO1B,EAAI2B,YAAYF,EAAMG,OAAOnB,MAAM,CAACC,MAAOe,EAAMG,IAAIC,SAAUhB,SAAS,SAAUC,GAAMd,EAAIe,KAAKU,EAAMG,IAAK,WAAYd,IAAME,WAAW,+BAA+Bd,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,OAAOiB,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACvB,EAAG,aAAa,CAACE,MAAM,CAAC,WAAY,EAAM,OAAS,OAAO,QAAU,KAAK,UAAY,cAAc,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,eAAe,KAAO,QAAQG,GAAG,CAAC,MAAQ,SAASmB,GAAQ,OAAO1B,EAAI8B,WAAWL,EAAMG,UAAU,GAAG1B,EAAG,aAAa,CAACE,MAAM,CAAC,WAAY,EAAM,OAAS,OAAO,QAAU,KAAK,UAAY,cAAc,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,iBAAiB,KAAO,QAAQG,GAAG,CAAC,MAAQ,SAASmB,GAAQ,OAAO1B,EAAI+B,gBAAgBN,EAAMG,UAAU,GAAG1B,EAAG,aAAa,CAACE,MAAM,CAAC,WAAY,EAAM,OAAS,OAAO,QAAU,OAAO,UAAY,cAAc,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,kBAAkB,KAAO,QAAQG,GAAG,CAAC,MAAQ,SAASmB,GAAQ,OAAO1B,EAAIgC,WAAWP,EAAMG,UAAU,WAAW,GAAG1B,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQJ,EAAIiC,MAAM,UAAYjC,EAAIW,UAAU,WAAWX,EAAIQ,gBAAgB,GAAGN,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,SAAS,QAAUJ,EAAIkC,kBAAkB,MAAQ,OAAO3B,GAAG,CAAC,iBAAiB,SAASmB,GAAQ1B,EAAIkC,kBAAkBR,GAAQ,MAAQ1B,EAAImC,kBAAkB,CAACjC,EAAG,UAAU,CAACkC,IAAI,kBAAkBhC,MAAM,CAAC,MAAQJ,EAAIqC,aAAa,MAAQrC,EAAIsC,kBAAkB,cAAc,UAAU,CAACpC,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,QAAQ,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,SAAW,IAAIK,MAAM,CAACC,MAAOV,EAAIqC,aAAaE,SAAU1B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIqC,aAAc,WAAYvB,IAAME,WAAW,4BAA4B,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAIqC,aAAaG,MAAO3B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIqC,aAAc,QAASvB,IAAME,WAAW,yBAAyB,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,WAAW,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAIqC,aAAaI,OAAQ5B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIqC,aAAc,SAAUvB,IAAME,WAAW,0BAA0B,IAAI,GAAGd,EAAG,OAAO,CAACwC,YAAY,gBAAgBtC,MAAM,CAAC,KAAO,UAAUa,KAAK,UAAU,CAACf,EAAG,YAAY,CAACK,GAAG,CAAC,MAAQ,SAASmB,GAAQ1B,EAAIkC,mBAAoB,KAAS,CAAClC,EAAIM,GAAG,SAASJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQP,EAAI2C,WAAW,CAAC3C,EAAIM,GAAG,UAAU,IAAI,GAAGJ,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,OAAO,QAAUJ,EAAI4C,iBAAiB,MAAQ,OAAOrC,GAAG,CAAC,iBAAiB,SAASmB,GAAQ1B,EAAI4C,iBAAiBlB,GAAQ,MAAQ1B,EAAI6C,qBAAqB,CAAC3C,EAAG,UAAU,CAACkC,IAAI,iBAAiBhC,MAAM,CAAC,MAAQJ,EAAI8C,YAAY,MAAQ9C,EAAI+C,iBAAiB,cAAc,UAAU,CAAC7C,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,aAAa,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAI8C,YAAYP,SAAU1B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAI8C,YAAa,WAAYhC,IAAME,WAAW,2BAA2B,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,aAAa,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAI8C,YAAYE,SAAUnC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAI8C,YAAa,WAAYhC,IAAME,WAAW,2BAA2B,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAI8C,YAAYN,MAAO3B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAI8C,YAAa,QAAShC,IAAME,WAAW,wBAAwB,GAAGd,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,WAAW,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAI8C,YAAYL,OAAQ5B,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAI8C,YAAa,SAAUhC,IAAME,WAAW,yBAAyB,IAAI,GAAGd,EAAG,OAAO,CAACwC,YAAY,gBAAgBtC,MAAM,CAAC,KAAO,UAAUa,KAAK,UAAU,CAACf,EAAG,YAAY,CAACK,GAAG,CAAC,MAAQ,SAASmB,GAAQ1B,EAAI4C,kBAAmB,KAAS,CAAC5C,EAAIM,GAAG,SAASJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQP,EAAIiD,UAAU,CAACjD,EAAIM,GAAG,UAAU,IAAI,GAAGJ,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,OAAO,QAAUJ,EAAIkD,wBAAwB,MAAQ,OAAO3C,GAAG,CAAC,iBAAiB,SAASmB,GAAQ1B,EAAIkD,wBAAwBxB,KAAU,CAACxB,EAAG,IAAI,CAACF,EAAIM,GAAG,UAAUN,EAAImD,GAAGnD,EAAIoD,SAASb,aAAarC,EAAG,IAAI,CAACwC,YAAY,aAAa,CAAC1C,EAAIM,GAAG,UAAUN,EAAImD,GAAGnD,EAAIoD,SAASC,cAAcnD,EAAG,IAAI,CAACF,EAAIM,GAAG,mBAAmBJ,EAAG,YAAY,CAACE,MAAM,CAAC,YAAc,OAAOK,MAAM,CAACC,MAAOV,EAAIsD,cAAezC,SAAS,SAAUC,GAAMd,EAAIsD,cAAcxC,GAAKE,WAAW,kBAAkBhB,EAAIuD,GAAIvD,EAAIwD,WAAW,SAASC,EAAKC,GAAG,OAAOxD,EAAG,YAAY,CAACqB,IAAIkC,EAAKE,GAAGvD,MAAM,CAAC,MAAQqD,EAAKG,SAAS,MAAQH,EAAKE,SAAQ,IAAI,GAAGzD,EAAG,OAAO,CAACwC,YAAY,gBAAgBtC,MAAM,CAAC,KAAO,UAAUa,KAAK,UAAU,CAACf,EAAG,YAAY,CAACK,GAAG,CAAC,MAAQ,SAASmB,GAAQ1B,EAAIkD,yBAA0B,KAAS,CAAClD,EAAIM,GAAG,SAASJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWG,GAAG,CAAC,MAAQP,EAAI6D,oBAAoB,CAAC7D,EAAIM,GAAG,UAAU,MAAM,IAE/mMwD,EAAkB,G,gDCkIP,GACfC,aACAC,YACAC,mBAEAC,KALA,WAOA,sBACA,6DACA,aAEA,WAGArD,4BAEA,kBACA,8EACA,aACA,WAEAA,6BAGA,OAEAO,YAEAT,WACAC,SACAuD,WACAC,WAGAnC,QAGAoC,UACAC,YACAC,aACAC,uBAEAtC,qBAEAG,cAEAsB,MACApB,YACAC,SACAC,UAEAgC,YAGAnC,mBACAE,OACA,CAAAkC,YAAAC,gBAAAC,gBACA,CAAAC,WAAAD,iBAEAnC,QACA,CAAAiC,YAAAC,iBAAAC,gBACA,CAAAC,WAAAD,kBAIAhC,oBAEAE,aACAP,YACAS,YACAR,SACAC,WAGAM,kBACAR,UACA,CAAAmC,YAAAC,iBAAAC,gBACA,CAAAE,MAAAC,OAAAJ,yBAAAC,iBAEA5B,UACA,CAAA0B,YAAAC,gBAAAC,gBACA,CAAAE,MAAAC,OAAAJ,yBAAAC,iBAEApC,OACA,CAAAkC,YAAAC,gBAAAC,gBACA,CAAAC,WAAAD,iBAEAnC,QACA,CAAAiC,YAAAC,iBAAAC,gBACA,CAAAC,WAAAD,kBAIAI,SAEA5B,YAEAF,2BAEAM,aAEAF,mBAIA2B,QAzGA,WA0GA,oBAEAC,SAEA1E,YAFA,+KAGA2E,gBACAb,YACAE,wBALA,mBAGAY,EAHA,EAGAlB,KAKAkB,oBARA,yCASA,oCATA,OAWAC,2BACA,2BACA,wBAbA,wGAgBAC,iBAhBA,SAgBAC,GAEA,0BAEA,oBAGAC,oBAvBA,SAuBAC,GAEA,yBAEA,oBAGA9D,YA9BA,oEA8BAC,GA9BA,yGA+BAuD,gBACAb,uDACAC,eAjCA,mBA+BAa,EA/BA,EA+BAlB,KAKAkB,oBApCA,yCAqCA,oCArCA,OAuCAC,2BAvCA,yGA0CAlD,gBA1CA,WA2CA,0CAGAL,WA9CA,oEA8CAF,GA9CA,gGA+CA,gBA/CA,SAmDAuD,gBACAb,4BApDA,mBAmDAc,EAnDA,EAmDAlB,KAGAmB,eACAD,oBAvDA,yCAwDA,kCAxDA,OA0DAC,yBACA,yBACA,0BA5DA,0GA+DAtD,gBA/DA,oEA+DAH,GA/DA,2GAgEA,yCACA8D,uBACAC,sBACAC,iBACAC,OAAA,wBApEA,UAgEAC,EAhEA,OAsEAA,cAtEA,yCAuEA,+BAvEA,uBAyEAX,gBACAb,0BACAC,kBA3EA,mBAyEAa,EAzEA,EAyEAlB,KAIAkB,oBA7EA,0CA8EA,oCA9EA,QAgFAC,2BACA,mBAjFA,0GAoFAnE,cApFA,WAsFA,0BAGA2B,mBAzFA,WA0FA,yCAGAI,QA7FA,WA6FA,WAEA,sMAEA8C,EAFA,iEAIAZ,gBACAb,YACAC,cACAL,qBAPA,mBAIAkB,EAJA,EAIAlB,KAMAkB,oBAVA,yCAWA,gCAXA,OAaAC,0BAEA,sBACA,gBAhBA,oGAoBA1C,SAnHA,+KAqHAwC,gBACAb,gCACAC,aACAL,yBAxHA,mBAqHAkB,EArHA,EAqHAlB,KAMAkB,oBA3HA,yCA4HA,oCA5HA,OA8HAC,2BAEA,0BAEA,mBAlIA,wGAqIArD,WArIA,oEAqIAJ,GArIA,gGAwIA,gBAxIA,SA0IAuD,gBACAb,cA3IA,mBA0IAc,EA1IA,EA0IAlB,KAGAmB,eACAD,oBA9IA,yCA+IA,oCA/IA,OAiJAC,2BAEA,sBAEA,gCArJA,0GAwJAxB,kBAxJA,kKA0JA,mBA1JA,yCA2JA,kCA3JA,uBA6JAsB,gBACAb,8CACAC,aACAL,MAAA8B,0BAhKA,mBA6JAZ,EA7JA,EA6JAlB,KAKAkB,oBAlKA,yCAmKA,kCAnKA,OAqKAC,yBACA,mBACA,gCAvKA,2GChPmc,I,wBCQ/bY,EAAY,eACd,EACAlG,EACA+D,GACA,EACA,KACA,WACA,MAIa,aAAAmC,E,2CCnBf","file":"js/home.02de5f5f.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入内容\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUserDialog}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"prop\":\"mg_state\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#409eff\",\"inactive-color\":\"#dcdfe6\"},on:{\"change\":function($event){return _vm.stateChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"编辑\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editDialog(scope.row)}}})],1),_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"删除\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUsersById(scope.row)}}})],1),_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.allotRoles(scope.row)}}})],1)]}}])})],1),_c('pagination',{attrs:{\"total\":_vm.total,\"queryInfo\":_vm.queryInfo,\"get-data\":_vm.getUserList}})],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.resetEditDialog}},[_c('el-form',{ref:\"editRuleFormRef\",attrs:{\"model\":_vm.editRuleForm,\"rules\":_vm.editRuleFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editRuleForm.username),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"username\", $$v)},expression:\"editRuleForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editRuleForm.email),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"email\", $$v)},expression:\"editRuleForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editRuleForm.mobile),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"mobile\", $$v)},expression:\"editRuleForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.resetAddUserDialog}},[_c('el-form',{ref:\"addRuleFormRef\",attrs:{\"model\":_vm.addRuleForm,\"rules\":_vm.addRuleFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.username),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"username\", $$v)},expression:\"addRuleForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.password),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"password\", $$v)},expression:\"addRuleForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.email),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"email\", $$v)},expression:\"addRuleForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.mobile),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"mobile\", $$v)},expression:\"addRuleForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.allotRolesDialogVisible,\"width\":\"40%\"},on:{\"update:visible\":function($event){_vm.allotRolesDialogVisible=$event}}},[_c('p',[_vm._v(\"当前的用户: \"+_vm._s(_vm.userInfo.username))]),_c('p',{staticClass:\"setMargin\"},[_vm._v(\"当前的角色: \"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"当前的用户: \\n      \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoles),callback:function ($$v) {_vm.selectedRoles=$$v},expression:\"selectedRoles\"}},_vm._l((_vm.rolesList),function(item,i){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.allotRolesDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRolesConfirm}},[_vm._v(\"确 定\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=''>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb> \r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 搜索框区域 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input clearable v-model=\"queryInfo.query\" placeholder=\"请输入内容\" @clear=\"getUserList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addUserDialog\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 用户数据列表展示 -->\r\n      <el-table :data=\"userList\" style=\"width: 100%\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\"></el-table-column>\r\n        <el-table-column prop=\"mg_state\" label=\"状态\">\r\n          <template v-slot=\"scope\">\r\n            <!-- {{scope.row}} -->\r\n            <!-- 开关 -->\r\n            <el-switch v-model=\"scope.row.mg_state\" active-color=\"#409eff\"\r\n              inactive-color=\"#dcdfe6\" @change=\"stateChange(scope.row)\">\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n          <template v-slot=\"scope\">\r\n            <el-tooltip :enterable=\"false\" effect=\"dark\" content=\"编辑\" placement=\"top-start\">\r\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editDialog(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip :enterable=\"false\" effect=\"dark\" content=\"删除\" placement=\"top-start\">\r\n              <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteUsersById(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n            <el-tooltip :enterable=\"false\" effect=\"dark\" content=\"分配角色\" placement=\"top-start\">\r\n              <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\" @click=\"allotRoles(scope.row)\"></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页区域 -->\r\n      <!-- 改写 -->\r\n      <pagination :total=\"total\" :queryInfo=\"queryInfo\" :get-data=\"getUserList\"></pagination>\r\n    </el-card>\r\n    <!-- 点击编辑按钮添加编辑对话框 -->\r\n    <el-dialog\r\n      title=\"修改用户信息\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"resetEditDialog\">\r\n      <el-form :model=\"editRuleForm\" :rules=\"editRuleFormRules\" ref=\"editRuleFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input disabled v-model=\"editRuleForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editRuleForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"mobile\">\r\n          <el-input v-model=\"editRuleForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"resetAddUserDialog\">\r\n      <el-form :model=\"addRuleForm\" :rules=\"addRuleFormRules\" ref=\"addRuleFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addRuleForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addRuleForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addRuleForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"mobile\">\r\n          <el-input v-model=\"addRuleForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色对话框 -->\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"allotRolesDialogVisible\"\r\n      width=\"40%\">\r\n      <p>当前的用户: {{userInfo.username}}</p>\r\n      <p class=\"setMargin\">当前的角色: {{userInfo.role_name}}</p>\r\n      <p>当前的用户: \r\n        <el-select v-model=\"selectedRoles\" placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"(item, i) in rolesList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.roleName\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </p>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"allotRolesDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"allotRolesConfirm\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '../other/Pagination.vue'\r\nimport request from '../../network/request'\r\nexport default {\r\n  name: 'Users',\r\n  components: {\r\n    Pagination\r\n  },\r\n  data () {\r\n    // 自定义邮箱和手机号的校验规则\r\n    var checkEmail = (rule, value, callback) => {\r\n        const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n        if(regEmail.test(value)) {\r\n          // 合法的邮箱\r\n          return callback()\r\n        }\r\n        // 不合法\r\n        callback(new Error('请输入正确的邮箱格式'))\r\n      };\r\n    var checkMobile = (rule, value, callback) => {\r\n        const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n        if(regMobile.test(value)) {\r\n          return callback()\r\n        } else {\r\n          callback(new Error('请输入正确的手机号格式'))\r\n        }\r\n      };\r\n    return {\r\n      //用户列表数据\r\n      userList: [],\r\n      //查询参数对象\r\n      queryInfo: {\r\n        query: '',\r\n        pagesize: 2,\r\n        pagenum: 1\r\n      },\r\n      //总条数\r\n      total: 0,\r\n      //控制编辑对话框的显示与隐藏\r\n      //搜索框请求路径对象\r\n      propsURL: {\r\n        url: 'users',\r\n        method: 'get',\r\n        params: this.queryInfo\r\n      },\r\n      editDialogVisible: false,\r\n      //校验规则对象\r\n      editRuleForm: {\r\n        //用户id\r\n        id: '',\r\n        username: '',\r\n        email: '',\r\n        mobile: '',\r\n        //角色id\r\n        role_id: ''//用户id和角色id都不需要校验,但是需要写出来,因为后面分配角色会用到\r\n      },\r\n      //校验规则\r\n      editRuleFormRules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validate: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validate: checkMobile, trigger: 'blur' }\r\n        ],\r\n      },\r\n      //控制添加用户对话框的显示与隐藏\r\n      addDialogVisible: false,\r\n      //添加用户表单数据对象\r\n      addRuleForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      //添加用户表单校验规则对象\r\n      addRuleFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 10, message: '长度在 3 到 10 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, max: 15, message: '长度在 6 到 15 个字符', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validate: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validate: checkEmail, trigger: 'blur' }\r\n        ],\r\n      },\r\n      //要编辑的用户的id\r\n      rowId: '',\r\n      //要在分配角色对话框弹出后渲染的数据\r\n      userInfo: {},\r\n      //控制分配角色对话框的显示与隐藏\r\n      allotRolesDialogVisible: false,\r\n      //获取的在下拉菜单中展示的角色列表\r\n      rolesList: [],\r\n      //选中的角色\r\n      selectedRoles: ''\r\n\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserList();\r\n  },\r\n  methods: {\r\n    //获取用户列表数据\r\n    async getUserList() {\r\n      const {data: res} = await request({\r\n        url: 'users',\r\n        params: this.queryInfo\r\n      })\r\n      // console.log(res);\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('获取用户列表数据失败!')\r\n      }\r\n      console.log('获取用户列表数据成功!');\r\n      this.userList = res.data.users;\r\n      this.total = res.data.total;\r\n    },\r\n    //页面条数发生改变时的操作\r\n    handleSizeChange(newSize) {\r\n      //把选择的新的条数赋值给当前pagesize\r\n      this.queryInfo.pagesize = newSize;\r\n      //重新请求数据\r\n      this.getUserList();\r\n    },\r\n    //页面页码发生改变时的操作\r\n    handleCurrentChange(newNum) {\r\n      //把选择的新的条数赋值给当前pagesize\r\n      this.queryInfo.pagenum = newNum;\r\n      //重新请求数据\r\n      this.getUserList();\r\n    },\r\n    //状态改变数据库里面的状态也发生改变\r\n    async stateChange(row) {\r\n      const {data: res} = await request({\r\n        url: `users/${row.id}/state/${row.mg_state}`,\r\n        method: 'put'\r\n      })\r\n      // console.log(res);\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('修改用户状态数据失败!')\r\n      }\r\n      console.log('修改用户状态数据成功!');\r\n    },\r\n    //重置编辑用户表单\r\n    resetEditDialog() {\r\n      this.$refs.editRuleFormRef.resetFields()\r\n    },\r\n    //点击编辑按钮展示编辑对话框\r\n    async editDialog(row) {\r\n      this.rowId = row.id;\r\n      // console.log(row);\r\n      // console.log(this.rowId);\r\n      //根据id获取编辑按钮已选中选项的数据\r\n      const {data: res} = await request({\r\n        url: `users/${row.id}`\r\n      })\r\n      console.log(res);\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('修改表单数据失败!')\r\n      }\r\n      console.log('修改表单数据成功!');\r\n      this.editRuleForm = res.data;\r\n      this.editDialogVisible = true; \r\n    },\r\n    //点击删除按钮根据id删除该条数据\r\n    async deleteUsersById(row) {\r\n      const result = await this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err);\r\n      // console.log(result);\r\n      if(result !== 'confirm') {\r\n        return this.$message.info('取消了删除操作')\r\n      }\r\n      const {data: res} = await request({\r\n        url: `users/${row.id}`,\r\n        method: 'delete'\r\n      })\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('删除用户列表数据失败!')\r\n      }\r\n      console.log('删除用户列表数据成功!');\r\n      this.getUserList();\r\n    },\r\n    //点击展示添加用户对话框\r\n    addUserDialog() {\r\n      // console.log(this.addUserDialogMessage);\r\n      this.addDialogVisible = true;\r\n    },\r\n    //重置添加用户表单\r\n    resetAddUserDialog() {\r\n      this.$refs.addRuleFormRef.resetFields();\r\n    },\r\n    //点击确定后添加新用户\r\n    addUser() {\r\n      //需要先校验表单\r\n      this.$refs.addRuleFormRef.validate(async valid => {\r\n        // console.log(valid)\r\n        if(!valid) return;\r\n        //发起请求\r\n        const {data: res} = await request({\r\n          url: 'users',\r\n          method: 'post',\r\n          data: this.addRuleForm\r\n        })\r\n        // console.log(res);\r\n        if(res.meta.status !== 201) {\r\n          return this.$message.error('添加新用户数据失败!')\r\n        }\r\n        console.log('添加新用户数据成功!');\r\n        //请求成功,关闭对话框,重新渲染数据\r\n        this.addDialogVisible = false;\r\n        this.getUserList();\r\n      })\r\n    },\r\n    //点击编辑用户确定按钮发送请求\r\n    async editUser() {\r\n      // console.log(this.rowId);\r\n      const {data: res} = await request({\r\n        url: `users/${this.rowId}`,\r\n        method: 'put',\r\n        data: this.editRuleForm\r\n      })\r\n      // console.log(res);\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('修改用户列表数据失败!')\r\n      }\r\n      console.log('修改用户列表数据成功!');\r\n      //修改成功,关闭对话框\r\n      this.editDialogVisible = false;\r\n      //重新加载数据\r\n      this.getUserList();\r\n    },\r\n    //分配角色(点击分配角色按钮立即请求角色列表数据:注意,是角色列表)\r\n    async allotRoles(row) {\r\n      // console.log(row);\r\n      //先把用户信息保存起来,供渲染上面两个input的时候使用\r\n      this.userInfo = row;\r\n\r\n      const {data: res} = await request({\r\n        url: 'roles',\r\n      })\r\n      console.log(res);\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('获取角色列表数据失败!')\r\n      }\r\n      console.log('获取角色列表数据成功!');\r\n      //把角色列表数据保存起来用于在下拉菜单中展示\r\n      this.rolesList = res.data;\r\n\r\n      this.allotRolesDialogVisible = true;\r\n    },\r\n    //确认分配角色\r\n    async allotRolesConfirm() {\r\n      // console.log(this.selectedRoles);\r\n      if(!this.selectedRoles) {\r\n        return this.$message.error('请选择要分配的角色')\r\n      }\r\n      const {data: res} = await request({\r\n        url: `users/${this.userInfo.id}/role`,\r\n        method: 'put',\r\n        data: {rid: this.selectedRoles}\r\n      })\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('分配角色数据失败!')\r\n      }\r\n      console.log('分配角色数据成功!');\r\n      this.getUserList();\r\n      this.allotRolesDialogVisible = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n  .setMargin {\r\n    margin: 15px 0;\r\n  }\r\n  .el-select {\r\n    width: 60%;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=62153d58&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=62153d58&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62153d58\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=style&index=0&id=62153d58&prod&lang=less&scoped=true&\""],"sourceRoot":""}